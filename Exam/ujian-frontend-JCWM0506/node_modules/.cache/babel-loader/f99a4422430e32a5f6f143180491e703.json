{"ast":null,"code":"var _jsxFileName = \"D:\\\\Course\\\\P\\\\Code\\\\Exam\\\\ujian-frontend-JCWM0506\\\\src\\\\pages\\\\checkoutPage.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport axios from 'axios';\nimport { URL_API } from '../helper';\nimport { orderSummary } from '../action/transactionAction';\nimport { Table, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CheckoutPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getData = () => {\n      let id = parseInt(localStorage.getItem('tkn_id'));\n      console.log(id);\n      axios.get(URL_API + `/userTransactions?user_id=${id}`).then(response => {\n        console.log('Response get data', response.data[0]);\n        this.props.orderSummary(response.data[0]);\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.toggle = () => {\n      this.setState({\n        modal: !this.state.modal\n      });\n    };\n\n    this.printModal = () => {\n      console.log('Modal', this.props);\n      let cart = this.props.order_summary.cart;\n      return cart.map((item, index) => {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: item.qty\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [\"IDR \", item.subtotal]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 21\n        }, this);\n      });\n    };\n\n    this.payOrder = () => {\n      let id = localStorage.getItem('tkn_id');\n\n      if (this.pay.textContent == \"PAY!\") {\n        this.pay.textContent = \"UNPAID\";\n        this.pay.style.backgroundColor = \"red\";\n        this.props.order_summary.status = \"PAY!\";\n        axios.get(URL_API + `/userTransactions`).then(response => {\n          console.log(response.data);\n          let index = response.data.findIndex(item => item.user_id === id);\n          console.log('Index', index);\n\n          if (index > -1) {\n            axios.patch(URL_API + `/userTransactions/${index + 1}`, {\n              status: \"PAID\"\n            }).then(response => {\n              console.log('Response get data', response.data);\n              this.props.orderSummary(response.data);\n            }).catch(error => {\n              console.log(error);\n            });\n          }\n        }).catch(error => {\n          console.log(error);\n        });\n      } else {\n        this.pay.textContent = \"PAID\";\n        this.pay.style.backgroundColor = \"green\";\n        this.props.order_summary.status = \"UNPAID\";\n        axios.get(URL_API + `/userTransactions`).then(response => {\n          console.log(response.data);\n          let index = response.data.findIndex(item => item.user_id === id);\n          console.log('Index', index);\n\n          if (index > -1) {\n            axios.patch(URL_API + `/userTransactions/${index + 1}`, {\n              status: \"UNPAID\"\n            }).then(response => {\n              console.log('Response get data', response.data);\n              this.props.orderSummary(response.data);\n            }).catch(error => {\n              console.log(error);\n            });\n          }\n        }).catch(error => {\n          console.log(error);\n        });\n      }\n    };\n\n    this.printData = () => {\n      let order = this.props.order_summary;\n      console.log('order summary', order);\n\n      if (order != []) {\n        return /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: order.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: order.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: [/*#__PURE__*/_jsxDEV(Button, {\n              color: \"primary\",\n              onClick: this.toggle,\n              children: \"Detail\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Modal, {\n              size: \"lg\",\n              isOpen: this.state.modal,\n              toggle: this.toggle,\n              style: {\n                width: '70%'\n              },\n              children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n                toggle: this.toggle,\n                charCode: \"x\",\n                children: \"Detail order transaction\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n                children: /*#__PURE__*/_jsxDEV(Table, {\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Name\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 118,\n                        columnNumber: 37\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Qty\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 119,\n                        columnNumber: 37\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"Subtotal\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 120,\n                        columnNumber: 37\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 37\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 33\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 33\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 29\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n                className: \"d-flex justify-content-between\",\n                children: /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"d-flex justify-content-center\",\n                  outline: true,\n                  color: \"secondary\",\n                  onClick: this.toggle,\n                  children: \"Back to transaction\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              onClick: this.payOrder,\n              color: \"success\",\n              innerRef: el => this.pay = el,\n              children: \"PAY!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this);\n      }\n    };\n\n    this.state = {};\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  render() {\n    console.log('user auth', this.props);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center my-4\",\n        children: \"Checkout User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Payment Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Products Detail\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Payment Action\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: this.printData()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = ({\n  authReducer,\n  orderReducers\n}) => {\n  return { ...authReducer,\n    ...orderReducers\n  };\n};\n\nexport default connect(mapStateToProps, {\n  orderSummary\n})(CheckoutPage);","map":{"version":3,"sources":["D:/Course/P/Code/Exam/ujian-frontend-JCWM0506/src/pages/checkoutPage.js"],"names":["React","Component","connect","axios","URL_API","orderSummary","Table","Button","Modal","ModalHeader","ModalBody","ModalFooter","CheckoutPage","constructor","props","getData","id","parseInt","localStorage","getItem","console","log","get","then","response","data","catch","error","toggle","setState","modal","state","printModal","cart","order_summary","map","item","index","name","qty","subtotal","payOrder","pay","textContent","style","backgroundColor","status","findIndex","user_id","patch","printData","order","email","width","el","componentDidMount","render","mapStateToProps","authReducer","orderReducers"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport axios from 'axios';\r\nimport { URL_API } from '../helper';\r\nimport { orderSummary } from '../action/transactionAction';\r\nimport { Table, Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\n\r\nclass CheckoutPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {  }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getData()\r\n    }\r\n\r\n    getData = () => {\r\n        let id = parseInt(localStorage.getItem('tkn_id'))\r\n        console.log(id)\r\n        axios.get(URL_API+`/userTransactions?user_id=${id}`)\r\n        .then(response => {\r\n            console.log('Response get data', response.data[0])\r\n            this.props.orderSummary(response.data[0])\r\n        })\r\n        .catch(error => {\r\n            console.log(error)\r\n        })\r\n    }\r\n\r\n    toggle = () => {\r\n        this.setState({ modal: !this.state.modal })\r\n    }\r\n\r\n    printModal = () => {\r\n        console.log('Modal', this.props)\r\n        let cart = this.props.order_summary.cart\r\n        return cart.map((item, index) => {\r\n            return  <tr>\r\n                        <td>{item.name}</td>\r\n                        <td>{item.qty}</td>\r\n                        <td>IDR {item.subtotal}</td>\r\n                    </tr>\r\n        })\r\n    }\r\n\r\n    payOrder = () => {\r\n        let id = localStorage.getItem('tkn_id')\r\n        if (this.pay.textContent == \"PAY!\") {\r\n            this.pay.textContent = \"UNPAID\"\r\n            this.pay.style.backgroundColor = \"red\"\r\n            this.props.order_summary.status = \"PAY!\"\r\n            axios.get(URL_API+`/userTransactions`)\r\n            .then(response => {\r\n                console.log(response.data)\r\n                let index = response.data.findIndex(item => item.user_id === id)\r\n                console.log('Index', index)\r\n                if (index > -1) {\r\n                    axios.patch(URL_API+`/userTransactions/${index+1}`, {\r\n                        status : \"PAID\"\r\n                    })\r\n                    .then(response => {\r\n                        console.log('Response get data', response.data)\r\n                        this.props.orderSummary(response.data)\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error)\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n        }\r\n        else {\r\n            this.pay.textContent = \"PAID\"\r\n            this.pay.style.backgroundColor = \"green\"\r\n            this.props.order_summary.status = \"UNPAID\"\r\n            axios.get(URL_API+`/userTransactions`)\r\n            .then(response => {\r\n                console.log(response.data)\r\n                let index = response.data.findIndex(item => item.user_id === id)\r\n                console.log('Index', index)\r\n                if (index > -1) {\r\n                    axios.patch(URL_API+`/userTransactions/${index+1}`, {\r\n                        status : \"UNPAID\"\r\n                    })\r\n                    .then(response => {\r\n                        console.log('Response get data', response.data)\r\n                        this.props.orderSummary(response.data)\r\n                    })\r\n                    .catch(error => {\r\n                        console.log(error)\r\n                    })\r\n                }\r\n            })\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n        }\r\n    }\r\n\r\n    printData = () => {\r\n        let order = this.props.order_summary\r\n        console.log('order summary', order)\r\n        if (order != []) {\r\n            return  <tr>\r\n                        <td>{order.email}</td>\r\n                        <td>{order.status}</td>\r\n                        <td>\r\n                            <Button color=\"primary\" onClick={this.toggle}>Detail</Button>\r\n                            <Modal size=\"lg\" isOpen={this.state.modal} toggle={this.toggle} style={{width: '70%'}}>\r\n                            <ModalHeader toggle={this.toggle} charCode=\"x\">Detail order transaction</ModalHeader>\r\n                            <ModalBody>\r\n                            <Table>\r\n                                <thead>\r\n                                    <tr>\r\n                                    <th>Name</th>\r\n                                    <th>Qty</th>\r\n                                    <th>Subtotal</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody> \r\n                                    {/* {this.printModal()} */}\r\n                                </tbody>\r\n                            </Table>\r\n                            </ModalBody>\r\n                            <ModalFooter className=\"d-flex justify-content-between\">\r\n                                <Button className=\"d-flex justify-content-center\" outline color=\"secondary\" onClick={this.toggle}>Back to transaction</Button>\r\n                            </ModalFooter>\r\n                            </Modal>\r\n                        </td>\r\n                        <td><Button onClick={this.payOrder} color=\"success\" innerRef={el => this.pay = el}>PAY!</Button></td>\r\n                    </tr>\r\n        }\r\n    }\r\n\r\n    render() { \r\n        console.log('user auth', this.props)\r\n        return (  \r\n            <div>\r\n                <h1 className=\"text-center my-4\">\r\n                    Checkout User\r\n                </h1>\r\n                <div>\r\n                <Table>\r\n                <thead>\r\n                    <tr>\r\n                    <th>Email</th>\r\n                    <th>Payment Status</th>\r\n                    <th>Products Detail</th>\r\n                    <th>Payment Action</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {this.printData()}\r\n                </tbody>\r\n                </Table>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({ authReducer, orderReducers }) => {\r\n    return {\r\n        ...authReducer,\r\n        ...orderReducers\r\n    }\r\n} \r\n\r\nexport default connect(mapStateToProps, {orderSummary})(CheckoutPage);"]},"metadata":{},"sourceType":"module"}