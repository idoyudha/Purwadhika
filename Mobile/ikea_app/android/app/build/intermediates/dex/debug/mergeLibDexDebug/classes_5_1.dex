{"ast":null,"code":"var _jsxFileName = \"D:\\\\Course\\\\P\\\\Code\\\\Exam\\\\ujian-frontend-JCWM0506\\\\src\\\\pages\\\\homePage.js\";\nimport React, { Component } from 'react';\nimport { URL_API } from '../helper';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { getProductAction } from '../action/productAction';\nimport { Link, Redirect } from 'react-router-dom';\nimport { Card, CardImg, CardText, CardBody, Modal, Input, Toast, ToastBody, ToastHeader, CardTitle, CardSubtitle, Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass HomePage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggle = index => {\n      if (this.props.id === null) {\n        alert('Login first');\n        this.setState({\n          redirect: true\n        });\n      } else {\n        this.setState({\n          modal: !this.state.modal\n        });\n      }\n    };\n\n    this.add = index => {\n      if (this.state.count < this.props.product_list[index].stock) {\n        this.setState(state => ({\n          count: state.count + 1\n        }));\n      } else {\n        alert('Stock not enough');\n      }\n    };\n\n    this.remove = () => {\n      if (this.state.count > 1) {\n        this.setState({\n          count: this.state.count - 1\n        });\n      }\n    };\n\n    this.addtoCart = (name, img, price) => {\n      let userID = this.props.id;\n      let qty = this.state.count;\n      let subtotal = qty * price;\n      console.log('Add to Cart', userID, name, img, qty, subtotal);\n      let cart = this.props.cart;\n      let index = cart.findIndex(item => item.name === name);\n      console.log('Findindex', index);\n\n      if (index > -1) {\n        cart[index].qty += qty;\n      } else {\n        cart.push({\n          userID,\n          name,\n          img,\n          qty,\n          subtotal\n        });\n      }\n\n      axios.patch(URL_API + `/users/${userID}`, {\n        cart: this.props.cart\n      }).then(response => {\n        console.log(response.data);\n      }).catch(error => {\n        console.log(\"Error\", error);\n      }); // this.handleToast()\n    };\n\n    this.handleToast = () => {\n      this.toast.style.display = 'block';\n    };\n\n    this.state = {\n      modal: false,\n      count: 1,\n      redirect: false,\n      indexProd: -1\n    };\n  }\n\n  componentDidMount() {\n    this.getProducts();\n  }\n\n  getProducts() {\n    axios.get(URL_API + `/products`).then(response => {\n      console.log(\"product list\", response.data);\n      this.props.getProductAction(response.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  printCard() {\n    return this.props.product_list.map((item, index) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-3 col-6\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(CardImg, {\n            width: \"100\",\n            src: item.img,\n            alt: \"Card image cap\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              tag: \"h5\",\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(CardSubtitle, {\n              tag: \"h6\",\n              className: \"mb-2 text-muted\",\n              children: [\"Price: IDR \", item.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(CardSubtitle, {\n              tag: \"h6\",\n              className: \"mb-2 text-muted\",\n              children: [\"Stock: \", item.stock]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              color: \"warning\",\n              block: true,\n              onClick: () => this.toggle(index),\n              children: \"Add to cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Modal, {\n              size: \"lg\",\n              isOpen: this.state.modal,\n              toggle: () => this.toggle(index),\n              style: {\n                width: '70%'\n              },\n              children: [/*#__PURE__*/_jsxDEV(ModalHeader, {\n                toggle: () => this.toggle(index),\n                charCode: \"x\",\n                children: [\"Add \", item.name, \" to cart, define quantity\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between align-items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item.img,\n                    style: {\n                      maxWidth: '100px'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: \"Total qty:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      width: '30%',\n                      display: 'flex',\n                      alignItems: 'center'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Button, {\n                      outline: true,\n                      size: \"sm\",\n                      onClick: () => this.remove(index),\n                      children: \"remove\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 115,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(Input, {\n                      className: \"text-center\",\n                      placeholder: \"qty\",\n                      value: this.state.count,\n                      style: {\n                        width: '50%',\n                        display: 'inline-block'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 116,\n                      columnNumber: 37\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      outline: true,\n                      size: \"sm\",\n                      color: \"primary\",\n                      onClick: () => this.add(index),\n                      children: \"add\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 37\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 11