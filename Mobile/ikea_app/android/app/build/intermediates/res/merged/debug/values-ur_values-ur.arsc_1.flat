{"ast":null,"code":"var _jsxFileName = \"D:\\\\Course\\\\P\\\\Code\\\\Exam\\\\ujian-frontend-JCWM0506\\\\src\\\\pages\\\\homePage.js\";\nimport React, { Component } from 'react';\nimport { URL_API } from '../helper';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { getProductAction } from '../action/productAction';\nimport { Link, Redirect } from 'react-router-dom';\nimport { Card, CardImg, CardText, CardBody, Modal, Input, Toast, ToastBody, ToastHeader, CardTitle, CardSubtitle, Button, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass HomePage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggle = () => {\n      if (this.props.id === null) {\n        alert('Login first');\n        this.setState({\n          redirect: true\n        });\n      } else {\n        this.setState({\n          modal: !this.state.modal\n        });\n      }\n    };\n\n    this.add = index => {\n      if (this.state.count < this.props.product_list[index].stock) {\n        this.setState(state => ({\n          count: state.count + 1\n        }));\n      } else {\n        alert('Stock not enough');\n      }\n    };\n\n    this.remove = () => {\n      if (this.state.count > 1) {\n        this.setState({\n          count: this.state.count - 1\n        });\n      }\n    };\n\n    this.addtoCart = (name, img, price) => {\n      let userID = this.props.id;\n      let qty = this.state.count;\n      let subtotal = qty * price;\n      console.log('Add to Cart', userID, name, img, qty, subtotal);\n      let cart = this.props.cart;\n      let index = cart.findIndex(item => item.name === name);\n      console.log('Findindex', index);\n\n      if (index > -1) {\n        cart[index].qty += qty;\n      } else {\n        cart.push({\n          name,\n          img,\n          qty,\n          subtotal\n        });\n      }\n\n      axios.patch(URL_API + `/users/${userID}`, {\n        cart: this.props.cart\n      }).then(response => {\n        console.log(response.data);\n        this.setState({\n          toast: !this.state.toast\n        });\n      }).catch(error => {\n        console.log(\"Error\", error);\n      });\n    };\n\n    this.handleToast = () => {\n      this.toast.style.display = 'block';\n    };\n\n    this.state = {\n      modal: false,\n      count: 1,\n      redirect: false,\n      toast: false\n    };\n  }\n\n  componentDidMount() {\n    this.getProducts();\n  }\n\n  getProducts() {\n    axios.get(URL_A